import cloudinary from 'cloudinary';
import { fileUpload } from '../../helpers/fileUpload';

cloudinary.config({ 
  cloud_name: 'do34jradz', 
  api_key: '541765437951468', 
  api_secret: 'yZZ8Lg6fWFHLtXBf6hA48mTaob0' 
});

describe('  ', () => {
  
  test('Debe de cargar un archivo y retornar el URL ', async ( done ) => {

    // const resp = await fetch('');
    // const blob = await resp.blob();
    
    const file = new File(['data:image/jpeg;base64,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'], 'photo.png');
    const url = await fileUpload( file );

    expect( typeof url ).toBe('string');

    // Delete image by ID
    const segment = url.split('/');
    const imgID = segment[ segment.length - 1 ].replace('.png', '');

    cloudinary.v2.api.delete_resources( imgID, {}, () => {
      done();
    });
  });
  
  test('Debe de retornar un error', async () => {

    const file = new File([], 'foto.png');
    const url = await fileUpload( file );  

    expect( url ).toBe( null );
  });
});
